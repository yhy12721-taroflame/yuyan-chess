# 象棋線上對戰 - 網頁版測試設置總結

## 📦 已創建的文件

### 1. 測試頁面
- **文件**：`public/test.html`
- **功能**：完整的網頁版測試界面
- **特性**：
  - 實時連接狀態監控
  - 房間創建和加入
  - 消息發送和接收
  - 實時日誌顯示
  - 統計信息追蹤
  - 多種測試操作按鈕

### 2. 文檔
- **TEST_GUIDE.md** - 詳細的測試指南
  - 快速開始步驟
  - 5 個測試場景
  - 常見問題解答
  - 調試技巧
  - 測試清單

- **WEB_TEST_README.md** - 網頁版測試 README
  - 功能概述
  - 快速開始方式
  - 功能表格
  - 故障排除
  - 調試技巧

- **TESTING_SETUP_SUMMARY.md** - 本文件
  - 設置總結
  - 使用說明

### 3. 啟動腳本
- **start-test.bat** - Windows CMD 啟動腳本
  - 自動檢查 Node.js
  - 自動安裝依賴
  - 自動編譯服務器
  - 自動打開測試頁面

- **start-test.ps1** - Windows PowerShell 啟動腳本
  - 同上功能
  - 使用 PowerShell 語法

## 🎯 測試頁面功能

### 左側面板：連接和房間管理
```
┌─────────────────────────────────┐
│ 連接和房間管理                   │
├─────────────────────────────────┤
│ 連接狀態：[●] 已連接             │
│                                 │
│ 服務器地址：[ws://localhost:8080]│
│ 玩家名稱：[測試玩家]             │
│ [連接] [斷開]                    │
│                                 │
│ 房間 ID：[12345]                 │
│ [創建房間] [加入房間]            │
│                                 │
│ 房間信息：                       │
│ - 房間 ID：12345                 │
│ - 玩家 ID：player_xxx            │
│ - 玩家數量：2/2                  │
│ - 房間狀態：進行中               │
│                                 │
│ 房間玩家：                       │
│ - 玩家 1 (在線)                  │
│ - 玩家 2 (在線)                  │
│                                 │
│ [離開房間]                       │
└─────────────────────────────────┘
```

### 右側面板：消息和日誌
```
┌─────────────────────────────────┐
│ 消息和日誌                       │
├─────────────────────────────────┤
│ 統計信息：                       │
│ ┌─────────┬─────────┐           │
│ │已發送: 5│已接收: 5│           │
│ ├─────────┼─────────┤           │
│ │隊列: 0  │時長: 45s│           │
│ └─────────┴─────────┘           │
│                                 │
│ 最後接收的消息：                 │
│ {                               │
│   "type": "connect_ack",        │
│   "data": {                     │
│     "playerId": "player_xxx"    │
│   }                             │
│ }                               │
│                                 │
│ 日誌：                           │
│ [14:30:45] ✓ 已連接到服務器     │
│ [14:30:46] ✓ 已獲得玩家 ID     │
│ [14:30:50] ✓ 已發送創建房間請求 │
│ [14:30:51] ✓ 房間已創建         │
│ [14:31:00] ✓ 玩家已加入房間     │
│                                 │
│ [清空日誌]                       │
└─────────────────────────────────┘
```

## 🚀 使用方式

### 方式 1：使用啟動腳本（推薦）

#### Windows (CMD)
```bash
start-test.bat
```

#### Windows (PowerShell)
```powershell
.\start-test.ps1
```

### 方式 2：手動啟動

```bash
# 1. 編譯服務器
npm run server:build

# 2. 啟動服務器
npm run server

# 3. 在瀏覽器中打開
# http://localhost:8080/test.html
```

## 📋 測試場景

### 場景 1：基本連接
1. 打開測試頁面
2. 輸入玩家名稱
3. 點擊「連接」
4. 驗證連接狀態變為綠色

### 場景 2：創建房間
1. 連接到服務器
2. 點擊「創建房間」
3. 記下房間 ID
4. 驗證房間信息顯示

### 場景 3：加入房間
1. 打開第二個測試頁面
2. 連接到服務器
3. 輸入房間 ID
4. 點擊「加入房間」
5. 驗證兩個玩家在同一房間

### 場景 4：發送消息
1. 連接到服務器
2. 點擊「發送測試消息」
3. 驗證消息被發送和接收

### 場景 5：多房間並發
1. 打開多個測試頁面
2. 每個頁面創建或加入不同的房間
3. 驗證房間之間的隔離

## 🔍 監控指標

### 連接狀態
- 🟢 已連接：WebSocket 連接正常
- 🔴 未連接：WebSocket 連接已斷開
- 🟡 連接中：正在建立 WebSocket 連接

### 統計信息
- **已發送消息**：發送的消息總數
- **已接收消息**：接收的消息總數
- **隊列中的消息**：等待發送的消息數
- **連接時長**：連接持續的時間

### 日誌類型
- 🟢 成功：操作成功完成
- 🔴 錯誤：發生錯誤
- 🟡 警告：警告信息
- ⚪ 調試：調試信息

## 🛠️ 故障排除

### 無法連接到服務器
1. 確保服務器已啟動：`npm run server`
2. 確保服務器地址正確：`ws://localhost:8080`
3. 檢查防火牆設置
4. 查看瀏覽器控制台（F12）

### 無法創建房間
1. 確保已連接到服務器
2. 確保玩家名稱不為空
3. 查看日誌中的錯誤信息

### 兩個玩家無法在同一房間
1. 確保兩個玩家都已連接
2. 確保使用相同的房間 ID
3. 查看日誌中的錯誤信息

## 📊 測試清單

- [ ] 單個玩家可以連接到服務器
- [ ] 玩家可以創建房間
- [ ] 玩家可以加入房間
- [ ] 兩個玩家可以在同一房間
- [ ] 玩家可以發送消息
- [ ] 玩家可以接收消息
- [ ] 心跳消息正常工作
- [ ] 連接狀態正確顯示
- [ ] 日誌正確記錄所有操作
- [ ] 統計信息正確更新

## 📚 相關文檔

| 文檔 | 說明 |
|------|------|
| TEST_GUIDE.md | 詳細的測試指南 |
| WEB_TEST_README.md | 網頁版測試 README |
| .kiro/specs/xiangqi-online/requirements.md | 需求文檔 |
| .kiro/specs/xiangqi-online/design.md | 設計文檔 |
| .kiro/specs/xiangqi-online/tasks.md | 任務列表 |

## 🎓 學習資源

### WebSocket 基礎
- 測試頁面展示了 WebSocket 的基本用法
- 可以觀察連接、消息發送和接收的過程

### 實時通信
- 通過日誌可以看到實時的消息流
- 可以測試不同的消息類型和格式

### 房間管理
- 測試頁面演示了房間的創建和加入
- 可以測試多房間並發

### 錯誤處理
- 測試頁面包含完整的錯誤處理
- 可以觀察不同的錯誤情況

## 💡 建議

### 短期（立即可做）
1. ✅ 使用測試頁面驗證基本連接
2. ✅ 測試房間創建和加入
3. ✅ 測試消息發送和接收

### 中期（下一步）
1. 實現更多消息類型
2. 添加遊戲邏輯
3. 實現錯誤恢復機制

### 長期（後續）
1. 優化性能
2. 添加安全機制
3. 部署到生產環境

## 📞 支持

如有問題：
1. 查看相關文檔
2. 檢查日誌和錯誤信息
3. 查看瀏覽器控制台
4. 聯繫開發團隊

---

**創建日期**：2024 年

**版本**：1.0.0

**狀態**：✅ 完成

## 下一步行動

1. **運行測試**
   ```bash
   start-test.bat  # Windows
   # 或
   npm run server:build && npm run server
   ```

2. **打開測試頁面**
   ```
   http://localhost:8080/test.html
   ```

3. **開始測試**
   - 按照 TEST_GUIDE.md 中的場景進行測試
   - 使用測試頁面的各種功能
   - 監控日誌和統計信息

4. **記錄結果**
   - 使用測試清單追蹤進度
   - 記錄任何問題或建議
   - 更新相關文檔

祝你測試順利！🎉
