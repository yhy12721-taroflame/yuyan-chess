# è±¡æ£‹æ¸¸æˆå¼•æ“ (Xiangqi Game Engine)

ä¸­å›½è±¡æ£‹æ¸¸æˆå¼•æ“ - ä½¿ç”¨ TypeScript å¼€å‘çš„çº¯é€»è¾‘å®ç°ï¼Œå¯ç”¨äºä»»ä½•å¹³å°ï¼ˆWebã€ç§»åŠ¨ç«¯ã€æ¡Œé¢ï¼‰ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- âœ… **çº¯ TypeScript** - æ ¸å¿ƒé€»è¾‘ä¸ä¾èµ–ä»»ä½•æ¡†æ¶
- âœ… **å®Œå…¨ç¦»çº¿** - æ— éœ€ç½‘ç»œè¿æ¥
- âœ… **è·¨å¹³å°** - å¯é›†æˆåˆ° Webã€React Nativeã€Electron ç­‰ä»»ä½•å¹³å°
- âœ… **ç±»å‹å®‰å…¨** - ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- âœ… **å…¨é¢æµ‹è¯•** - å•å…ƒæµ‹è¯• + å±æ€§æµ‹è¯•ï¼ˆProperty-Based Testingï¼‰
- âœ… **é«˜æµ‹è¯•è¦†ç›–ç‡** - ç›®æ ‡ 90%+

## ğŸ“ é¡¹ç›®ç»“æ„

```
xiangqi-game/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ core/              # æ¸¸æˆæ ¸å¿ƒé€»è¾‘ï¼ˆçº¯ TypeScriptï¼‰
â”‚       â”œâ”€â”€ types.ts       # âœ… ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ Position.ts    # âœ… ä½ç½®ç»“æ„ï¼ˆå·²å®Œæˆï¼‰
â”œâ”€â”€ __tests__/            # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/             # âœ… å•å…ƒæµ‹è¯•ï¼ˆ16 ä¸ªæµ‹è¯•ï¼‰
â”‚   â””â”€â”€ properties/       # âœ… å±æ€§æµ‹è¯•ï¼ˆ9 ä¸ªæµ‹è¯•ï¼Œæ¯ä¸ª 100 æ¬¡è¿­ä»£ï¼‰
â””â”€â”€ dist/                 # ç¼–è¯‘è¾“å‡ºï¼ˆè¿è¡Œ npm run build åç”Ÿæˆï¼‰
```

## âœ… å·²å®ŒæˆåŠŸèƒ½

### ä»»åŠ¡ 1.1: Positionï¼ˆä½ç½®ï¼‰ç»“æ„

å®ç°äº†å®Œæ•´çš„ä½ç½®ç³»ç»Ÿï¼š

- **Position ç±»**ï¼šè¡¨ç¤ºæ£‹ç›˜ä¸Šçš„ä½ç½®ï¼ˆfile: 0-8, rank: 0-9ï¼‰
- **createPosition**ï¼šåˆ›å»ºå¹¶éªŒè¯ä½ç½®
- **isInPalace**ï¼šåˆ¤æ–­ä½ç½®æ˜¯å¦åœ¨ä¹å®«å†…
- **hasCrossedRiver**ï¼šåˆ¤æ–­æ£‹å­æ˜¯å¦å·²è¿‡æ²³
- **isValid**ï¼šéªŒè¯ä½ç½®æ˜¯å¦åœ¨æ£‹ç›˜èŒƒå›´å†…

### æµ‹è¯•ç»“æœ

```
âœ… Test Suites: 2 passed, 2 total
âœ… Tests:       25 passed, 25 total
âœ… Time:        2.529 s
```

- âœ… å•å…ƒæµ‹è¯•ï¼š16 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡
- âœ… å±æ€§æµ‹è¯•ï¼šéªŒè¯ Property 1, 2, 3
  - Property 1: ä½ç½®å¾€è¿”ä¸€è‡´æ€§
  - Property 2: ä¹å®«è¾¹ç•Œæ£€æµ‹
  - Property 3: è¿‡æ²³æ£€æµ‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘è§†æ¨¡å¼ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
npm run test:watch

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

### 3. ç¼–è¯‘ä»£ç 

```bash
npm run build
```

ç¼–è¯‘åçš„ä»£ç åœ¨ `dist/` ç›®å½•ï¼Œå¯ä»¥åœ¨ä»»ä½• JavaScript/TypeScript é¡¹ç›®ä¸­ä½¿ç”¨ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Jest**: å•å…ƒæµ‹è¯•æ¡†æ¶
- **ts-jest**: TypeScript æµ‹è¯•æ”¯æŒ
- **fast-check**: å±æ€§æµ‹è¯•åº“ï¼ˆProperty-Based Testingï¼‰

## ğŸ“± å¦‚ä½•é›†æˆåˆ°ç§»åŠ¨åº”ç”¨

è¿™ä¸ªå¼•æ“æ˜¯çº¯ TypeScript å®ç°ï¼Œå¯ä»¥è½»æ¾é›†æˆåˆ°ä»»ä½•å¹³å°ï¼š

### React Nativeï¼ˆæ¨èç”¨äºæ‰‹æœºï¼‰

```typescript
import { createPosition, isInPalace } from 'xiangqi-game';

const pos = createPosition(4, 1);
console.log(isInPalace(pos, Color.Red)); // true
```

### Web åº”ç”¨

```typescript
import { GameEngine } from 'xiangqi-game';

const game = createGame();
// ä½¿ç”¨æ¸¸æˆå¼•æ“...
```

### Flutterï¼ˆé€šè¿‡ JavaScript æ¡¥æ¥ï¼‰

å¯ä»¥é€šè¿‡ Flutter çš„ JavaScript æ¡¥æ¥ä½¿ç”¨ç¼–è¯‘åçš„ä»£ç ã€‚

## ğŸ“‹ ä¸‹ä¸€æ­¥ä»»åŠ¡

ç»§ç»­å®ç°ä»»åŠ¡åˆ—è¡¨ä¸­çš„å…¶ä»–ä»»åŠ¡ï¼š

- [ ] 1.2 å®ç° Pieceï¼ˆæ£‹å­ï¼‰ç»“æ„
- [ ] 1.3 å®ç° Moveï¼ˆç§»åŠ¨ï¼‰ç»“æ„
- [ ] 2.1 å®ç° Boardï¼ˆæ£‹ç›˜ï¼‰ç»“æ„
- [ ] 2.2 å®ç°åˆå§‹æ£‹ç›˜è®¾ç½®
- ...

æŸ¥çœ‹å®Œæ•´ä»»åŠ¡åˆ—è¡¨ï¼š`.kiro/specs/xiangqi-game/tasks.md`

## ğŸ“ ä¸ºä»€ä¹ˆæ”¹æˆçº¯ TypeScriptï¼Ÿ

æœ€åˆæˆ‘ä»¬è®¡åˆ’ä½¿ç”¨ React Nativeï¼Œä½†å‘ç°ï¼š

1. **React Native é…ç½®å¤æ‚** - éœ€è¦ Babelã€Metroã€åŸç”Ÿä¾èµ–ç­‰
2. **æµ‹è¯•å›°éš¾** - Jest éœ€è¦å¤„ç† React Native çš„ç‰¹æ®Šè¯­æ³•
3. **æ ¸å¿ƒé€»è¾‘ç‹¬ç«‹** - æ¸¸æˆé€»è¾‘ä¸éœ€è¦ä¾èµ– UI æ¡†æ¶

**ç°åœ¨çš„æ–¹æ¡ˆæ›´å¥½**ï¼š
- âœ… æ ¸å¿ƒå¼•æ“æ˜¯çº¯ TypeScriptï¼ˆå¯ç”¨äºä»»ä½•å¹³å°ï¼‰
- âœ… æµ‹è¯•ç®€å•å¿«é€Ÿ
- âœ… ä»¥åå¯ä»¥è½»æ¾æ·»åŠ ä»»ä½• UIï¼ˆReact Nativeã€Webã€Flutter ç­‰ï¼‰

## ğŸ“„ è®¸å¯è¯

MIT
